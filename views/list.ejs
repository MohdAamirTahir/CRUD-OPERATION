<!-- views/list.ejs -->

<!DOCTYPE html>
<html lang="en">
<head>
    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>List of Data</title>
    <style>
        /* CSS styles for the table */
        table {
            border-collapse: collapse;
            width: 100%;
        }
        th, td {
            border: 1px solid #dddddd;
            text-align: left;
            padding: 8px;
        }
        th {
            background-color: #f2f2f2;
        }
        tr:nth-child(even) {
            background-color: #f2f2f2;
        }
        .btn-update {
            background-color: #4CAF50;
            color: white;
            padding: 6px 12px;
            border: none;
            cursor: pointer;
        }
        .btn-delete {
            background-color: #f44336;
            color: white;
            padding: 6px 12px;
            border: none;
            cursor: pointer;
        }
    </style>
</head>
<body>
    <h1>Crud Opration</h1>
    <table>
        <thead>
            <tr>
                <th>ID</th>
                <th>Name</th>
                <th>Email</th>
                <th>Password</th>
                <th>Action</th>
            </tr>
        </thead>
        <tbody>
            <% data.forEach(item => { %>
                <tr>
                    <td><%= item.id %></td>
                    <td><%= item.name %></td>
                    <td><%= item.email %></td>
                    <td><%= item.password %></td>
                    <td>
                        <button class="btn-update" onclick="updateItem('<%= item.id %>')">Update</button>
                        <button class="btn-delete" onclick="deleteItem('<%=item.id %>')">Delete</button>
                    </td>
                </tr>
            <% }); %>
        </tbody>
    </table>
</body>
</html>
<script>
     function updateItem(ids) {
                $.ajax({
                type: "POST",
                url: "/update",
                data: { id: ids },
                success: function (response) {
                    console.log("Update successful");
                },
                error: function (error) {
                    console.error("Error: " + error);
                },
            });
     }
    // $(document).ready(function () {
       
    // }
    //     $(".btn-update").click(function () {
    //         console.log('here')
    //         var itemId = $(this).data("item-id");
    //         console.log(itemId)
    //         $.ajax({
    //             type: "POST", // You can use POST or GET depending on your controller's API
    //             url: "/update", // Replace with the actual URL of your controller
    //             data: { id: itemId }, // Send the item ID as data
    //             success: function (response) {
    //                 // Handle the response from the controller (e.g., display data or perform actions)
    //                 console.log("Update successful");
    //             },
    //             error: function (error) {
    //                 // Handle any errors that occur during the AJAX request
    //                 console.error("Error: " + error);
    //             },
    //         });
    //     });

    //     // Handle the "Delete" button click
    //     $(".btn-delete").click(function () {
    //         var itemId = $(this).data("item-id");
            
    //         $.ajax({
    //             type: "POST", // You can use POST or GET depending on your controller's API
    //             url: "/your-controller-url", // Replace with the actual URL of your controller
    //             data: { id: itemId }, // Send the item ID as data
    //             success: function (response) {
    //                 // Handle the response from the controller (e.g., display data or perform actions)
    //                 console.log("Delete successful");
    //             },
    //             error: function (error) {
    //                 // Handle any errors that occur during the AJAX request
    //                 console.error("Error: " + error);
    //             },
    //         });
    //     });
    // });
</script>